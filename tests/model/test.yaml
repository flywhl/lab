network:
  shape:
    - stimulus: 1
    - e: 10
      i: 10
    - pop: 1
  layers:

    # LAYER 1
    - populations:
        e: 
          preset: default
          step: "@import:lab.model.function.step"
          size: 10
          dt: 0.001
          activation: spk
          voltages:
            - tau: 30
              v_leak: -70
              v_reset: -70
              threshold: -55
          conductances:
            - tau: 100
              a: -1
              b: 1
              v_eq: -70
        i: 
          preset: default
          step: "@import:lab.model.function.step"
          size: 10
          dt: 0.001
          activation: spk
          voltages:
            - tau: 30
              v_leak: -70
              v_reset: -70
              threshold: -55
          conductances:
            - tau: 100
              a: -1
              b: 1
              v_eq: -70
      ff_dendrites:
        - tau: 15
          train: true
          density: 1.0
          weights:
            shape: ["@val:shape[0].stimulus", "@val: shape[1].e"]
            mean: [1.0, 0.1]
            parity: -1





        # to, from
        e:
          stimulus:
            tau: 15
            train: true
            density: 1.0
            weights: 
              shape: ["@val:shape[0].stimulus", "@val:shape[1].e"]
              mean: 1.0
              var: 0.1
        i:
          stimulus:
            tau: 15
            train: true
            density: 1.0
            weights: 
              shape: [1, 10]
              parity: 1
              mean: 0.0
              var: 0.0
      local_dendrites:
        e:
          e:
            tau: 15
            train: true
            density: 0.5
            weights: 
              shape: [10, 10]
              mean: 0.0
              var: 0.1
            parity: 1
          i:
            shape: [10, 10]
            tau: 15
            train: true
            density: 0.5
            weights: 
              mean: 0.0
              var: 0.1
            parity: -1
        i:
          e:
            shape: [10, 10]
            tau: 15
            train: true
            density: 0.5
            weights: 
              mean: 0.0
              var: 0.1
            parity: 1
          i:
            shape: [10, 10]
            tau: 15
            train: true
            density: 0.5
            weights: 
              mean: 0.0
              var: 0.1
            parity: -1

    # OUTPUT LAYER
    - populations:
        pop: 
          preset: default
          step: "@import:lab.model.function.li_step"
          size: 1
          dt: 0.001
          activation: identity
          voltages:
            - tau: 50
              v_leak: 0
              v_reset: 0
              threshold: 0
      ff_dendrites:
        # to, from
        pop:
          e:
            shape: [10, 1]
            tau: 15
            train: true
            density: 1.0
            weights: 
              mean: 0.0
              var: 0.1
            parity: 1
          i:
            shape: [10, 1]
            tau: 15
            train: true
            density: 1.0
            weights: 
              mean: 0.0
              var: 0.1
            parity: -1
        pop:
          e:
            shape: [10, 1]
            tau: 15
            train: true
            density: 1.0
            weights: 
              mean: 0.0
              var: 0.1
            parity: 1
          i:
            shape: [10, 1]
            tau: 15
            train: true
            density: 1.0
            weights: 
              mean: 0.0
              var: 0.1
            parity: -1

hypers:
  dt: 0.001
  duration: 4
  ampl: 1.0
  freq: 1.0
  pulse_ampl: 2.0
  pulse_duration: 0.1
